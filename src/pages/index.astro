---
import Layout from "../layouts/Layout.astro";
import { Icon } from "astro-icon/components";
import { PiMoonFill } from "react-icons/pi";
---

<Layout title="Raghav Ruia">
	<!-- Name & Social Icons Section -->
	<div class="mt-1 mb-3 flex flex-col gap-1 sm:mt-0 sm:mb-0 sm:flex-row sm:items-center sm:justify-between sm:gap-2">
		<!-- Name Section -->
		<h1 class="text-primary font-serif text-[2.5rem] tracking-tight">Raghav Ruia</h1>

		<!-- Social icons section -->
		<div class="text-body mt-1 flex items-center gap-4 sm:mt-0">
			<!-- Resume -->
			<a
				href="/docs/Raghav_Ruia_Resume.pdf"
				target="_blank"
				rel="noopener noreferrer"
				class="md:hover:text-primary flex items-center text-sm font-medium transition-colors duration-200">
				<Icon name="tabler:file-text" size={16} class="mr-1" />
				<span>Resume</span>
			</a>

			<!-- LinkedIn -->
			<a
				href="https://linkedin.com/in/raghav-ruia"
				target="_blank"
				rel="noopener noreferrer"
				class="md:hover:text-primary transition-colors duration-200">
				<Icon name="tabler:brand-linkedin" size={18} />
			</a>

			<!-- Mail -->
			<a href="mailto:raghavruia.work@gmail.com" class="md:hover:text-primary transition-colors duration-200">
				<Icon name="tabler:mail" size={18} />
			</a>
		</div>
	</div>

	<!-- Bio Section -->
	<div class="flex items-center gap-1.5 font-medium tracking-tight">
		<h2 class="text-title text-base">advocate for systems, processes & tech</h2>
	</div>

	<!-- Backdrop Overlay (appears on hover/focus) -->
	<div
		id="tooltip-backdrop"
		class="pointer-events-none fixed inset-0 z-10 bg-black/0 opacity-0 transition-all duration-300 ease-in-out"
		style="transition-property: opacity, background-color;">
	</div>

	<!-- Backstory Section -->
	<section class="max-w-prose pt-6 sm:max-w-[70ch] md:max-w-[80ch] lg:max-w-[90ch]">
		<div
			class="text-body text-[0.95rem] leading-relaxed font-[450] sm:text-base md:text-[1.05rem] md:leading-[1.75rem] lg:text-[1.125rem]">
			<!-- First Paragraph -->
			<div>
				<span class="text-primary mb-2.5 block font-semibold tracking-wide uppercase">backstory</span>
				<span class="block">loved tech since my childhood,</span>
				<span class="block">did computer science + managed family biz,</span>
				<span class="block">got interested in building systems & processes,</span>
			</div>

			<!-- Second Paragraph with Tooltip -->
			<div class="mt-4">
				<span class="block">
					stumbled upon <span class="font-medium text-black">ERPNext</span> â€”
				</span>
				<span class="block">
					does everything a company <span
						id="tooltip-wrapper"
						class="group relative inline-block cursor-pointer align-baseline select-none"
						tabindex="0">
						<button
							id="tooltip-trigger"
							class="text-primary cursor-pointer font-medium underline decoration-dotted decoration-1 underline-offset-2 transition-all duration-150 ease-in-out select-none focus:outline-none md:hover:text-black">
							does
						</button>
						<span
							id="tooltip-content"
							class="border-body/20 pointer-events-none invisible absolute top-full left-1/2 z-20 mt-4 w-[min(80vw,22rem)] -translate-x-1/2 scale-95 rounded-xl border bg-white/95 p-4 opacity-0 shadow-xl transition-all duration-300 ease-in-out select-text"
							style="transform-origin: 50% -10px;">
							<span
								class="absolute bottom-full left-1/2 h-0 w-0 -translate-x-1/2 border-r-[10px] border-b-[10px] border-l-[10px] border-r-transparent border-b-white/95 border-l-transparent"
								style="filter: drop-shadow(0 -1px 1px rgba(0,0,0,0.05));"></span>

							<h3 class="text-primary mb-1 text-[0.95rem] font-semibold sm:text-base">What ERPNext does</h3>
							<p class="text-body text-sm leading-relaxed sm:text-[0.95rem]">
								Automate workflows for manufacturing, inventory, projects, CRM, HR, accounting and compliance â€” <span
									class="text-primary font-medium">
									everything you need</span
								>.
							</p>
						</span>
					</span>,
				</span>
				<span class="block"
					>while being <span
						class="bg-gradient-to-r from-emerald-800 via-green-700 to-gray-700 bg-clip-text font-semibold text-transparent"
						>100% free</span
					> & open source! ðŸŒ±</span
				>
			</div>

			<!-- Third Paragraph -->
			<div class="mt-8">
				<span class="block"
					>find me tinkering with
					<a
						href="https://frappe.io/framework/doctype"
						target="_blank"
						rel="noopener noreferrer"
						class="text-black transition-all duration-150 ease-in-out md:hover:text-green-800">
						DocTypes.
					</a>
				</span>
			</div>
		</div>
	</section>

	<!-- CTA Section -->
	<section>
		<div class="group">
			<p
				class="border-body/20 bg-hoverColor/60 text-body text-s mt-8 mb-8 w-fit rounded-md border px-2 py-1 transition-all duration-300 ease-in-out">
				<PiMoonFill
					className="md:group-hover:text-primary -mt-0.5 inline-block transition-all duration-300 ease-in-out"
				/>
				Want to run your business while sleeping?
				<a
					href="https://frappe.io/erpnext?utm_source=raghavruia.com"
					rel="noopenner noreferrer"
					target="_blank"
					class="text-body md:hover:text-primary md:group-hover:text-primary font-medium underline underline-offset-2 transition-all duration-150 ease-in-out"
					>try ERPNext</a
				>
			</p>
		</div>
	</section>

	<script>
		// Handle tooltip for all screen sizes (hover on desktop, click on mobile/tablet)
		const tooltipWrapper = document.getElementById("tooltip-wrapper");
		const tooltipTrigger = document.getElementById("tooltip-trigger");
		const tooltipContent = document.getElementById("tooltip-content");
		const backdrop = document.getElementById("tooltip-backdrop");

		if (tooltipWrapper && tooltipTrigger && tooltipContent && backdrop) {
			let isTooltipOpen = false;

			const showTooltip = () => {
				isTooltipOpen = true;
				tooltipContent.classList.remove("opacity-0", "scale-95", "invisible", "pointer-events-none");
				tooltipContent.classList.add("opacity-100", "scale-100", "visible", "pointer-events-auto");
				backdrop.style.backgroundColor = "rgba(0, 0, 0, 0.15)";
				backdrop.style.opacity = "1";
				backdrop.classList.remove("pointer-events-none");
			};

			const hideTooltip = () => {
				isTooltipOpen = false;
				tooltipContent.classList.remove("opacity-100", "scale-100", "visible", "pointer-events-auto");
				tooltipContent.classList.add("opacity-0", "scale-95", "invisible", "pointer-events-none");
				backdrop.style.backgroundColor = "rgba(0, 0, 0, 0)";
				backdrop.style.opacity = "0";
				backdrop.classList.add("pointer-events-none");
			};

			const toggleTooltip = (e) => {
				e.preventDefault();
				e.stopPropagation();
				if (isTooltipOpen) {
					hideTooltip();
				} else {
					showTooltip();
				}
			};

			// Desktop: Hover events
			tooltipWrapper.addEventListener("mouseenter", showTooltip);
			tooltipWrapper.addEventListener("mouseleave", hideTooltip);

			// Mobile/Tablet: Click/Touch events
			tooltipTrigger.addEventListener("click", toggleTooltip);
			tooltipTrigger.addEventListener("touchend", (e) => {
				e.preventDefault(); // Prevent double-firing on touch devices
				toggleTooltip(e);
			});

			// Keyboard navigation
			tooltipWrapper.addEventListener("focusin", showTooltip);
			tooltipWrapper.addEventListener("focusout", hideTooltip);

			// Close tooltip when clicking backdrop
			backdrop.addEventListener("click", hideTooltip);

			// Close tooltip when clicking outside
			document.addEventListener("click", (e) => {
				if (isTooltipOpen && !tooltipWrapper.contains(e.target)) {
					hideTooltip();
				}
			});

			// Prevent closing when clicking inside tooltip content
			tooltipContent.addEventListener("click", (e) => {
				e.stopPropagation();
			});
		}
	</script>
</Layout>
